name: Debug Workflow

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
      
    - name: Debug Info
      run: |
        echo "=== DEBUG INFORMATION ==="
        echo "Current directory: $(pwd)"
        echo "Files in repo:"
        ls -la
        echo ""
        echo "Python files:"
        ls -la *.py
        echo ""
        echo "Workflow files:"
        ls -la .github/workflows/
        echo ""
        echo "=== ENVIRONMENT ==="
        echo "SUPABASE_URL length: ${#SUPABASE_URL}"
        echo "SUPABASE_KEY length: ${#SUPABASE_KEY}"
        echo "NEWSDATA_KEY length: ${#NEWSDATA_KEY}"
        echo "SITE_ID: $SITE_ID"
        echo ""
        echo "=== PYTHON TEST ==="
        python3 -c "print('Python works!'); import requests; print('Requests imported!')"
        
    - name: Test Bot Script
      env:
        SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
        SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
        NEWSDATA_KEY: ${{ secrets.NEWSDATA_KEY }}
        WP_TOKEN: ${{ secrets.WP_TOKEN }}
        SITE_ID: ${{ secrets.SITE_ID }}
      run: |
        echo "=== TESTING BOT SCRIPT ==="
        if [ -f "github_bot.py" ]; then
          python3 github_bot.py
        else
          echo "‚ùå github_bot.py not found!"
        fi
